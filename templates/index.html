<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indic Spellchecker</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Indic Spellchecker</h1>
        <form id="spellForm" autocomplete="off">
            <label for="language">Language</label>
            <select id="language" name="language">
                <option value="ml">Malayalam</option>
                <option value="hi">Hindi</option>
                <option value="ta" disabled>Tamil (coming soon)</option>
                <option value="te" disabled>Telugu (coming soon)</option>
                <option value="kn" disabled>Kannada (coming soon)</option>
                <option value="bn" disabled>Bengali (coming soon)</option>
                <option value="gu" disabled>Gujarati (coming soon)</option>
                <option value="pa" disabled>Punjabi (coming soon)</option>
                <option value="or" disabled>Oriya (coming soon)</option>
                <option value="as" disabled>Assamese (coming soon)</option>
                <option value="sa" disabled>Sanskrit (coming soon)</option>
                <option value="ur" disabled>Urdu (coming soon)</option>
            </select>
            <label for="inputText">Enter Indic Text</label>
            <textarea id="inputText" name="inputText" rows="3" placeholder="Type your word here..." required></textarea>
            <button type="submit" id="checkBtn">Check Spelling</button>
        </form>
        <div id="resultBox" class="hidden">
            <label for="outputText">Corrected / Suggestions</label>
            <textarea id="outputText" name="outputText" rows="3" readonly></textarea>
        </div>
        <div id="status"></div>
    </div>
    <script>
    const form = document.getElementById('spellForm');
    const inputText = document.getElementById('inputText');
    const outputText = document.getElementById('outputText');
    const resultBox = document.getElementById('resultBox');
    const status = document.getElementById('status');
    const checkBtn = document.getElementById('checkBtn');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const word = inputText.value.trim();
        const language = document.getElementById('language').value;
        if (!word) return;
        resultBox.classList.add('hidden');
        status.textContent = 'Checking...';
        checkBtn.disabled = true;
        outputText.value = '';
        try {
            const res = await fetch('/check_and_suggest', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ word, language })
            });
            if (!res.ok) {
                const errData = await res.json();
                throw new Error(errData.detail || 'Server error');
            }
            const data = await res.json();
            let output = '';
            if (data.status === 1) {
                output = '✔️ Spelling is correct!';
            } else if (data.status === 0 && data.suggestions.length > 0) {
                output = 'Suggestions: ' + data.suggestions.join(', ');
            } else if (data.status === 2) {
                output = 'Word is unique or not found, but no suggestions.';
            } else {
                output = 'No suggestions available.';
            }
            outputText.value = output;
            resultBox.classList.remove('hidden');
            status.textContent = '';
        } catch (err) {
            status.textContent = '❌ Error: ' + err.message;
        } finally {
            checkBtn.disabled = false;
        }
    });
    </script>
</body>
</html> 